<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b0f14" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>APEXFORGE 3</title>

  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <header class="top">
    <div class="brand">
      <div class="seal" aria-hidden="true">
        <!-- ApexForge Siegel (inline SVG) -->
        <svg viewBox="0 0 64 64" width="40" height="40">
          <defs>
            <linearGradient id="g" x1="0" x2="1">
              <stop offset="0" stop-color="#9be15d"/>
              <stop offset="1" stop-color="#00e3ae"/>
            </linearGradient>
          </defs>
          <circle cx="32" cy="32" r="28" fill="none" stroke="url(#g)" stroke-width="3"/>
          <path d="M18 40 L32 14 L46 40 Z" fill="none" stroke="url(#g)" stroke-width="3" stroke-linejoin="round"/>
          <path d="M22 44 H42" stroke="url(#g)" stroke-width="3" stroke-linecap="round"/>
        </svg>
      </div>
      <div>
        <div class="title">APEXFORGE 3</div>
        <div class="subtitle">Apex is the goal. Forge is the process.</div>
      </div>
    </div>

    <div class="topActions">
      <button class="btn ghost" id="btnExport">Export</button>
      <label class="btn ghost file">
        Import
        <input type="file" id="fileImport" accept="application/json" />
      </label>
    </div>
  </header>

  <main class="wrap">
    <section class="tabs">
      <button class="tab active" data-tab="today">Heute</button>
      <button class="tab" data-tab="training">Training</button>
      <button class="tab" data-tab="progress">Progress</button>
      <button class="tab" data-tab="insights">Insights</button>
      <button class="tab" data-tab="settings">Ziele</button>
    </section>

    <!-- HEUTE -->
    <section class="panel active" id="tab-today">
      <div class="grid2">
        <div class="card">
          <div class="cardHead">
            <div class="h">Tagesdaten</div>
            <div class="muted" id="todayDate"></div>
          </div>

          <div class="row">
            <label>Gewicht (kg)</label>
            <input id="inWeight" type="number" step="0.1" placeholder="z.B. 93.0" />
          </div>

          <div class="row">
            <label>Protein (g)</label>
            <input id="inP" type="number" step="1" placeholder="z.B. 180" />
          </div>
          <div class="row">
            <label>Carbs (g)</label>
            <input id="inC" type="number" step="1" placeholder="z.B. 220" />
          </div>
          <div class="row">
            <label>Fett (g)</label>
            <input id="inF" type="number" step="1" placeholder="z.B. 70" />
          </div>

          <div class="split">
            <div class="pill">
              <div class="k">Kalorien</div>
              <div class="v" id="outKcal">0</div>
            </div>
            <div class="pill">
              <div class="k">Protein-%</div>
              <div class="v" id="outPShare">0%</div>
            </div>
            <div class="pill">
              <div class="k">Carbs-%</div>
              <div class="v" id="outCShare">0%</div>
            </div>
            <div class="pill">
              <div class="k">Fett-%</div>
              <div class="v" id="outFShare">0%</div>
            </div>
          </div>

          <div class="actions">
            <button class="btn" id="btnSaveDay">Speichern</button>
            <button class="btn ghost" id="btnQuickFill">Schnell: Ziele</button>
          </div>
        </div>

        <div class="card">
          <div class="cardHead">
            <div class="h">Makro-Status</div>
            <div class="muted" id="macroHint"></div>
          </div>

          <div class="bars">
            <div class="bar">
              <div class="barTop"><span>Protein</span><span id="barPText">0 / 0 g</span></div>
              <div class="track"><div class="fill" id="barP"></div></div>
            </div>
            <div class="bar">
              <div class="barTop"><span>Carbs</span><span id="barCText">0 / 0 g</span></div>
              <div class="track"><div class="fill" id="barC"></div></div>
            </div>
            <div class="bar">
              <div class="barTop"><span>Fett</span><span id="barFText">0 / 0 g</span></div>
              <div class="track"><div class="fill" id="barF"></div></div>
            </div>
            <div class="bar">
              <div class="barTop"><span>Kalorien</span><span id="barKText">0 / 0 kcal</span></div>
              <div class="track"><div class="fill" id="barK"></div></div>
            </div>
          </div>

          <div class="note">
            Tipp: 1g Protein/Carbs = 4 kcal • 1g Fett = 9 kcal
          </div>
        </div>
      </div>
    </section>

    <!-- TRAINING -->
    <section class="panel" id="tab-training">
      <div class="grid2">
        <div class="card">
          <div class="cardHead">
            <div class="h">Training eintragen</div>
            <div class="muted">e1RM wird automatisch berechnet</div>
          </div>

          <div class="row">
            <label>Übung</label>
            <input id="trEx" placeholder="z.B. Bankdrücken" />
          </div>
          <div class="row3">
            <div class="row">
              <label>Sätze</label>
              <input id="trSets" type="number" step="1" placeholder="z.B. 4" />
            </div>
            <div class="row">
              <label>Reps</label>
              <input id="trReps" type="number" step="1" placeholder="z.B. 6" />
            </div>
            <div class="row">
              <label>Kg</label>
              <input id="trKg" type="number" step="0.5" placeholder="z.B. 90" />
            </div>
          </div>

          <div class="split">
            <div class="pill">
              <div class="k">Volumen</div>
              <div class="v" id="outVol">0</div>
            </div>
            <div class="pill">
              <div class="k">e1RM</div>
              <div class="v" id="outE1RM">0</div>
            </div>
          </div>

          <div class="actions">
            <button class="btn" id="btnAddSet">Log hinzufügen</button>
            <button class="btn ghost" id="btnClearTrain">Felder leeren</button>
          </div>
        </div>

        <div class="card">
          <div class="cardHead">
            <div class="h">Heute geloggt</div>
            <div class="muted" id="trainCount"></div>
          </div>

          <div class="list" id="trainList"></div>
        </div>
      </div>
    </section>

    <!-- PROGRESS -->
    <section class="panel" id="tab-progress">
      <div class="card">
        <div class="cardHead">
          <div class="h">Progress</div>
          <div class="muted">14 / 30 Tage Ansicht</div>
        </div>

        <div class="seg">
          <button class="segBtn active" data-range="14">14</button>
          <button class="segBtn" data-range="30">30</button>
        </div>

        <div class="chartWrap">
          <canvas id="chartWeight" height="140"></canvas>
        </div>
        <div class="chartWrap">
          <canvas id="chartMacros" height="160"></canvas>
        </div>

        <div class="note">
          Gewichts-Chart = gespeicherte Tagesgewichte. Makro-Chart = Protein/Carbs/Fett (g) + kcal.
        </div>
      </div>
    </section>

    <!-- INSIGHTS -->
    <section class="panel" id="tab-insights">
      <div class="grid2">
        <div class="card">
          <div class="cardHead">
            <div class="h">Trends</div>
            <div class="muted">gleitender Schnitt</div>
          </div>
          <div class="split">
            <div class="pill">
              <div class="k">Ø Gewicht (7T)</div>
              <div class="v" id="avgW7">–</div>
            </div>
            <div class="pill">
              <div class="k">Ø kcal (7T)</div>
              <div class="v" id="avgK7">–</div>
            </div>
            <div class="pill">
              <div class="k">Protein-Treffer</div>
              <div class="v" id="hitP">–</div>
            </div>
            <div class="pill">
              <div class="k">Training (7T)</div>
              <div class="v" id="tr7">–</div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="cardHead">
            <div class="h">Best e1RM (30T)</div>
            <div class="muted">Top-Übungen</div>
          </div>
          <div class="list" id="bestE1RM"></div>
        </div>
      </div>
    </section>

    <!-- SETTINGS -->
    <section class="panel" id="tab-settings">
      <div class="grid2">
        <div class="card">
          <div class="cardHead">
            <div class="h">Makro-Ziele</div>
            <div class="muted">pro Tag</div>
          </div>

          <div class="row">
            <label>Protein Ziel (g)</label>
            <input id="goalP" type="number" step="1" />
          </div>
          <div class="row">
            <label>Carbs Ziel (g)</label>
            <input id="goalC" type="number" step="1" />
          </div>
          <div class="row">
            <label>Fett Ziel (g)</label>
            <input id="goalF" type="number" step="1" />
          </div>
          <div class="row">
            <label>Kcal Ziel (optional)</label>
            <input id="goalK" type="number" step="10" placeholder="leer = aus Makros berechnet" />
          </div>

          <div class="actions">
            <button class="btn" id="btnSaveGoals">Ziele speichern</button>
            <button class="btn ghost" id="btnResetAll">Alles zurücksetzen</button>
          </div>
        </div>

        <div class="card">
          <div class="cardHead">
            <div class="h">PWA</div>
            <div class="muted" id="pwaState">—</div>
          </div>
          <div class="note">
            iPhone: In Safari öffnen → Teilen → „Zum Home-Bildschirm“.
            Offline: App läuft auch ohne Netz, sobald einmal geladen.
          </div>
          <div class="actions">
            <button class="btn ghost" id="btnUpdateSW">Offline-Cache refresh</button>
          </div>
        </div>
      </div>
    </section>

    <footer class="foot muted">
      ApexForge 3 • lokal gespeichert (dein Gerät) • Export für Backup
    </footer>
  </main>

  <script src="app.js"></script>
</body>
</html>
